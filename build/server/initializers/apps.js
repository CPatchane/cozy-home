// Generated by CoffeeScript 1.9.3
var Application, fs, path;

path = require('path');

fs = require('fs');

Application = require('../models/application');

module.exports = function(callback) {
  return Application.destroyAll(function() {
    var data;
    data = {
      name: "contacts",
      displayName: "Contacts",
      description: "contacts description",
      slug: "contacts",
      state: "installed",
      isStoppable: false,
      icon: "img/apps/contacts.svg",
      git: "https://github.com/cozy/cozy-contacts.git",
      version: "2.1.7",
      comment: "official application",
      needsUpdate: false,
      favorite: false,
      iconType: "svg",
      port: 9114
    };
    return Application.create(data, function(err, app) {
      var iconPath;
      iconPath = path.join(__dirname, '..', '..', 'client', 'public', 'img', 'apps', 'contacts.svg');
      console.log(fs.readFileSync(iconPath));
      return app.attachFile(iconPath, {
        name: 'icon.svg'
      }, function(err) {
        return callback();
      });
    });
  });
};
